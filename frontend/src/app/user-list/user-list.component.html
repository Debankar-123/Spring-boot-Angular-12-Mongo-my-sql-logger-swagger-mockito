<section class="py-5">
  <div class="container d-flex justify-content-center py-5">
    <div class="row w-50">
      <div class="col mb-3">
        <label for="name" class="form-label user-id"
          >Enter the User Id to Find</label
        >
        <input type="number" [(ngModel)]="u" />
        <!-- [(ngModel)]="userId" -->
        <button
          type="button"
          class="btn btn-primary ms-4"
          name="byid"
          (click)="getById(u)"
        >
          Find
        </button>
      </div>
      <div class="user-elem py-4">
        <div class="row">
          <div class="col-3">User Id</div>
          <div class="col-6">: {{ l.userId }}</div>
          <br /><br />
        </div>
        <div class="row">
          <div class="col-3">User Name</div>
          <div class="col-6">: {{ l.userName }}</div>
          <br /><br />
        </div>
        <div class="row">
          <div class="col-3">Email</div>
          <div class="col-6">: {{ l.email }}</div>
          <br /><br />
        </div>
        <div class="row">
          <div class="col-3">Role</div>
          <div class="col-6">: {{ l.role }}</div>
          <br /><br />
        </div>
      </div>
    </div>
  </div>

  <div class="container my-5">
    <div class="row">
      <div class="col-3 my-4">
        <h1>List Of Branch Managers</h1>
      </div>
      <div class="col-3 my-4">
        <button type="button" class="btn btn-primary" (click)="find()">
          Get All
        </button>
      </div>
    </div>

    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">UserId</th>
          <th scope="col">User Name</th>
          <th scope="col">Email</th>
          <th scope="col">Role</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of list">
          <th>{{ u.userId }}</th>
          <th>{{ u.userName }}</th>
          <th>{{ u.email }}</th>
          <th>{{ u.role }}</th>
          <td>
            <button
              type="button"
              class="btn upd-btn btn-ud"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
              (click)="edit(u.userId)"
            >
              Update
            </button>
          </td>
          <td>
            <button
              type="button"
              class="btn btn-danger btn-ud"
              (click)="delete(u.userId)"
            >
              delete
            </button>
          </td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content bg-secondary">
          <div class="modal-header">
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="container">
              <div
                *ngIf="alert"
                class="alert alert-success alert-dismissible fade show border p-3 rounded-3"
                role="alert"
              >
                <strong>Success !</strong> Your data as been updated
                succesfully..
                <button
                  (click)="closeAlert()"
                  type="button"
                  class="close"
                  data-dismiss="alert"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <form [formGroup]="registerForm" class="border p-3 rounded-3">
                <div class="row g-0">
                  <div class="col text-center p-2 mb-3 bg-dark py-3">
                    <span class="fs-3 text-light">Update User</span>
                  </div>
                </div>

                <div class="row">
                  <div class="col mb-3">
                    <label for="name" class="form-label">Name</label>
                    <input
                      type="text"
                      class="form-control"
                      [(ngModel)]="user.userName"
                      id="name"
                      formControlName="userName"
                    />
                    <div
                      class="form-text text-danger"
                      *ngIf="Name.errors?.['required']&&(Name.touched || Name.dirty)"
                    >
                      Name Required.
                    </div>
                    <div
                      class="form-text text-danger"
                      *ngIf="Name.errors?.['minlength']&&(Name.touched || Name.dirty)"
                    >
                      Name is to short.
                    </div>
                    <div
                      class="form-text text-danger"
                      *ngIf="Name.errors?.['pattern']&&(Name.touched || Name.dirty)"
                    >
                      Name should start with alphabet.
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col mb-3">
                    <label for="email" class="form-label">Email Address</label>
                    <input
                      type="email"
                      class="form-control"
                      [(ngModel)]="user.email"
                      id="email"
                      formControlName="email"
                    />
                    <div class="form-text"></div>
                    <div
                      class="form-text text-danger"
                      *ngIf="Email.errors?.['required']&&(Email.touched || Email.dirty)"
                    >
                      Email is Required.
                    </div>
                    <div
                      class="form-text text-danger"
                      *ngIf="Email.errors?.['email']&&(Email.touched || Email.dirty)"
                    >
                      Email is invalid.
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-6 offset-3">
                    <div class="d-grid">
                      <button
                        type="submit"
                        class="btn btn-primary"
                        data-bs-dismiss="modal"
                        (click)="updateuser()"
                      >
                        Update
                      </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
